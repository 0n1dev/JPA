# 플러시
---

> 영속성 컨텍스트의 변경내용을 데이터베이스에 반영

## 플러시가 발생하면 생기는 일

- 변경 감지 -> 수정된 엔티티 쓰기 지연 SQL 저장소에 등록 -> 쓰기 지연 SQL 저장소의 쿼리를 데이터베이스에 전송

## 영속성 컨텍스트를 플러시하는 방법

- 직접 호출
    - `em.flush`
- 플러시 자동 호출
    - 트랜잭션 커밋
    - JPQL 쿼리 실행

## 플러시 모드 옵션

- `em.setFlushMode(FlushModeType.COMMIT)`
    - FlushModeType.AUTO - 커밋이나 쿼리를 실행할 때 플러시(기본값)
    - FlushModeType.COMMIT - 커밋할 때만 플러시

## 플러시는?

- 영속성 컨텍스트를 비우지 않음
- 영속성 컨텍스트의 변경내용을 데이터베이스에 동기화
- 트랜잭션이란 작업 단위가 중요 -> 커밋 직전에만 동기화 하면 됨