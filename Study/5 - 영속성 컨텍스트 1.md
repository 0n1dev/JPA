# 영속성 컨텍스트 1
---

## JPA에서 가장 중요한 2가지

- 객체와 관계형 데이터베이스 매핑
- 영속성 컨텍스트

### 영속성 컨텍스트

- 엔티티를 영구 저장하는 환경
- EntityManager.persist(entity);
- 엔티티매니저를 통해 영속성 컨텍스트에 접근

### 엔티티의 생명주기

- 비영속
    - 영속성 컨텍스트와 전혀 관계가 없는 `새로운` 상태
    - JPA와 관련없이 객체만 생성
- 영속
    - 영속성 컨텍스트에 `관리`되는 상태
    - 객체를 생성 후 엔티티 매니저를 통해 `em.persist(entity)`를 하면 영속 상태가 됨
- 준영속
    - 영속성 컨텍스트에 저장되었다가 `분리`된 상태
    - 엔티티 매니저에서 `em.detach(entity)`를 하면 영속성 컨텍스트에서 분리, 준 영속 상태
- 삭제
    - `삭제`된 상태
    - 엔티티 매니저에서 `em.remove(entity)`를 하여 DB 삭제를 한 상태

### 영속성 컨텍스트의 이점

- 1차 캐시
- 동일성 보장
- 트랜잭션을 지원하는 쓰기 지연
- 변경 감지 (Dirty Checking)
- 지연 로딩 (Lazy Loading)